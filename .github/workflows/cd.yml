on:
  workflow_run:
    workflows: CI
    branches: main
    types: completed

name: Deploy

env:
  SQLX_OFFLINE: true

jobs:
  production:
    runs-on:
      - self-hosted
      - baremetal
    environment: production
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Deploy
        run: docker compose up --detach --build --wait --wait-timeout 30
